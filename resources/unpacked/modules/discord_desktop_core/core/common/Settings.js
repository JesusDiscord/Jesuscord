"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _fs=_interopRequireDefault(require("fs")),_path=_interopRequireDefault(require("path"));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}class Settings{constructor(t){this.path=_path.default.join(t,"settings.json");try{this.lastSaved=_fs.default.readFileSync(this.path),this.settings=JSON.parse(this.lastSaved)}catch(t){this.lastSaved="",this.settings={}}this.lastModified=this._lastModified()}_lastModified(){try{return _fs.default.statSync(this.path).mtime.getTime()}catch(t){return 0}}get(t,e=!1){return this.settings.hasOwnProperty(t)?this.settings[t]:e}set(t,e){this.settings[t]=e}save(){if(this.lastModified&&this.lastModified!==this._lastModified())console.warn("Not saving settings, it has been externally modified.");else try{const t=JSON.stringify(this.settings,null,2);this.lastSaved!=t&&(this.lastSaved=t,_fs.default.writeFileSync(this.path,t),this.lastModified=this._lastModified())}catch(t){console.warn("Failed saving settings with error: ",t)}}}exports.default=Settings,module.exports=exports.default;