"use strict";const electron=require("electron"),allowedAppPaths=new Set(["home","appData","desktop","documents","downloads","crashDumps"]),{APP_GET_RELEASE_CHANNEL_SYNC:APP_GET_RELEASE_CHANNEL_SYNC,APP_GET_HOST_VERSION_SYNC:APP_GET_HOST_VERSION_SYNC,APP_GET_MODULE_VERSIONS:APP_GET_MODULE_VERSIONS,APP_GET_PATH:APP_GET_PATH,APP_SET_BADGE_COUNT:APP_SET_BADGE_COUNT,APP_DOCK_SET_BADGE:APP_DOCK_SET_BADGE,APP_DOCK_BOUNCE:APP_DOCK_BOUNCE,APP_DOCK_CANCEL_BOUNCE:APP_DOCK_CANCEL_BOUNCE,APP_RELAUNCH:APP_RELAUNCH,APP_GET_DEFAULT_DOUBLE_CLICK_ACTION:APP_GET_DEFAULT_DOUBLE_CLICK_ACTION}=require("../common/constants").IPCEvents;let releaseChannel=electron.ipcRenderer.sendSync(APP_GET_RELEASE_CHANNEL_SYNC),hostVersion=electron.ipcRenderer.sendSync(APP_GET_HOST_VERSION_SYNC),moduleVersions={};function getReleaseChannel(){return releaseChannel}function getVersion(){return hostVersion}function getModuleVersions(){return moduleVersions}async function getPath(e){if(!allowedAppPaths.has(e))throw new Error(e+" is not an allowed app path");return electron.ipcRenderer.invoke(APP_GET_PATH,e)}async function setBadgeCount(e){electron.ipcRenderer.invoke(APP_SET_BADGE_COUNT,e)}async function dockSetBadge(e){electron.ipcRenderer.invoke(APP_DOCK_SET_BADGE,e)}async function dockBounce(e){return electron.ipcRenderer.invoke(APP_DOCK_BOUNCE,e)}async function dockCancelBounce(e){electron.ipcRenderer.invoke(APP_DOCK_CANCEL_BOUNCE,e)}async function relaunch(){electron.ipcRenderer.invoke(APP_RELAUNCH)}async function getDefaultDoubleClickAction(){return electron.ipcRenderer.invoke(APP_GET_DEFAULT_DOUBLE_CLICK_ACTION)}function registerUserInteractionHandler(e,n,t){const o=document.getElementById(e);if(null==o)throw new Error(`Element with id '${e}' was not found`);function r(e){e.isTrusted&&t(e)}return o.addEventListener(n,r),()=>{o.removeEventListener(n,r)}}electron.ipcRenderer.invoke(APP_GET_MODULE_VERSIONS).then(e=>{moduleVersions=e}),electron.ipcRenderer.on("DISCORD_MODULE_INSTALLED",async e=>{moduleVersions=await electron.ipcRenderer.invoke(APP_GET_MODULE_VERSIONS)}),module.exports={getReleaseChannel:getReleaseChannel,getVersion:getVersion,getModuleVersions:getModuleVersions,getPath:getPath,setBadgeCount:setBadgeCount,dock:{setBadge:dockSetBadge,bounce:dockBounce,cancelBounce:dockCancelBounce},relaunch:relaunch,getDefaultDoubleClickAction:getDefaultDoubleClickAction,registerUserInteractionHandler:registerUserInteractionHandler};